[{"/Users/htoomyat/Downloads/CS124/cs124-lab2/src/index.jsx":"1","/Users/htoomyat/Downloads/CS124/cs124-lab2/src/App.jsx":"2","/Users/htoomyat/Downloads/CS124/cs124-lab2/src/TodoList.jsx":"3","/Users/htoomyat/Downloads/CS124/cs124-lab2/src/TodoItem.jsx":"4","/Users/htoomyat/Downloads/CS124/cs124-lab2/src/Menu.jsx":"5","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/index.jsx":"6","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/App.jsx":"7","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/TodoList.jsx":"8","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/Menu.jsx":"9","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/TodoItem.jsx":"10","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/firebase.jsx":"11"},{"size":146,"mtime":1645890162535,"results":"12","hashOfConfig":"13"},{"size":2562,"mtime":1646179383430,"results":"14","hashOfConfig":"13"},{"size":1138,"mtime":1646175926917,"results":"15","hashOfConfig":"13"},{"size":568,"mtime":1645897130647,"results":"16","hashOfConfig":"13"},{"size":1084,"mtime":1646183401434,"results":"17","hashOfConfig":"13"},{"size":146,"mtime":1645890162535,"results":"18","hashOfConfig":"19"},{"size":4204,"mtime":1648187514440,"results":"20","hashOfConfig":"19"},{"size":1206,"mtime":1648095710526,"results":"21","hashOfConfig":"19"},{"size":1084,"mtime":1646183401434,"results":"22","hashOfConfig":"19"},{"size":1575,"mtime":1646356315048,"results":"23","hashOfConfig":"19"},{"size":497,"mtime":1648132286404,"results":"24","hashOfConfig":"19"},{"filePath":"25","messages":"26","suppressedMessages":"27","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1omiecp",{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"35","messages":"36","suppressedMessages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","suppressedMessages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1flotzo",{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47"},{"filePath":"48","messages":"49","suppressedMessages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"51","messages":"52","suppressedMessages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"/Users/htoomyat/Downloads/CS124/cs124-lab2/src/index.jsx",[],[],[],"/Users/htoomyat/Downloads/CS124/cs124-lab2/src/App.jsx",[],[],"/Users/htoomyat/Downloads/CS124/cs124-lab2/src/TodoList.jsx",[],[],"/Users/htoomyat/Downloads/CS124/cs124-lab2/src/TodoItem.jsx",[],[],"/Users/htoomyat/Downloads/CS124/cs124-lab2/src/Menu.jsx",[],[],"/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/index.jsx",[],[],"/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/App.jsx",["61"],[],"import React, { useState } from \"react\";\nimport { generateUniqueID } from \"web-vitals/dist/modules/lib/generateUniqueID\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport TodoList from \"./TodoList\";\nimport MenuPopupState from \"./Menu\";\nimport {\n  collection,\n  doc,\n  query,\n  getDocs,\n  where,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n} from \"firebase/firestore\";\n\nimport { db } from \"./firebase.jsx\";\n\n// const INITIAL_DATA = [\n//   {\n//     itemName: \"default item\",\n//     itemStatus: false,\n//     id: generateUniqueID(),\n//   },\n//   {\n//     itemName: \"another item\",\n//     itemStatus: false,\n//     id: generateUniqueID(),\n//   },\n//   {\n//     itemName: \"and another item\",\n//     itemStatus: true,\n//     id: generateUniqueID(),\n//   },\n// ];\n\nconst App = () => {\n  // const [todoItems, setTodoItems] = useState(INITIAL_DATA);\n  const TODO_ITEMS_PATH = \"/users/test-user/todo-items\";\n  const todoItemsRef = collection(db, TODO_ITEMS_PATH);\n  const [todoItems, loading, error] = useCollectionData(todoItemsRef);\n  const [isAddClicked, setIsAddClicked] = useState(false);\n  const [newItemNameInput, setNewItemNameInput] = useState(\"\");\n  const [isCompletedShown, setIsCompletedShown] = useState(true);\n  const [priorityInput, setPriorityInput] = useState(0);\n\n  const handleItemChange = (id, field, value) => {\n    // const newTodoItems = todoItems.map((item) => {\n    //   return item.id === id ? { ...item, [field]: value } : item;\n    // });\n    // setTodoItems(newTodoItems);\n    const changedDocRef = doc(db, `${TODO_ITEMS_PATH}/${id}`);\n    updateDoc(changedDocRef, {\n      [field]: value,\n    });\n  };\n\n  const handleItemAdd = (name) => {\n    // setTodoItems([\n    //   ...todoItems,\n    //   { itemName: name, itemStatus: false, id: generateUniqueID() },\n    // ]);\n    const id = generateUniqueID();\n    const newDocRef = doc(db, `${TODO_ITEMS_PATH}/${id}`);\n    setDoc(newDocRef, {\n      itemName: name,\n      itemStatus: false,\n      id,\n    });\n    setIsAddClicked(false);\n    setNewItemNameInput(\"\");\n  };\n\n  const handleToggleShowCompleted = () => {\n    setIsCompletedShown((prevState) => !prevState);\n  };\n\n  const handleDeleteCompleted = async () => {\n    // const newData = todoItems.filter((item) => item.itemStatus === false);\n    // setTodoItems(newData);\n\n    // create a query with the required conditions\n    const completedItemsQuery = query(\n      collection(db, TODO_ITEMS_PATH),\n      where(\"itemStatus\", \"==\", true)\n    );\n\n    // get a snapshot of all matching docs\n    const querySnapshot = await getDocs(completedItemsQuery);\n\n    // console.log(querySnapshot);\n    // perform delete on each one\n    querySnapshot.forEach((task) => {\n      const delDocRef = doc(db, `${TODO_ITEMS_PATH}/${task.id}`);\n      deleteDoc(delDocRef);\n      console.log(task.id, \"=>\", task.data());\n    });\n  };\n\n  return (\n    <>\n      <div className=\"app-container\">\n        {loading ? (\n          \"Loading, Please wait...\"\n        ) : (\n          <TodoList\n            data={todoItems}\n            onItemChange={handleItemChange}\n            onItemAdd={handleItemAdd}\n            isCompletedShown={isCompletedShown}\n          />\n        )}\n        {isAddClicked === true ? (\n          <div>\n            <input\n              type=\"text\"\n              name=\"new-item\"\n              id=\"new-item\"\n              value={newItemNameInput}\n              onChange={(e) => setNewItemNameInput(e.target.value)}\n            />\n            <input\n              type=\"number\"\n              min=\"0\"\n              max=\"3\"\n              name=\"priority\"\n              id=\"priority\"\n              value={priorityInput}\n              onChange={(e) => setPriorityInput(e.target.value)}\n            />\n            <button onClick={() => handleItemAdd(newItemNameInput)}>Add</button>\n          </div>\n        ) : (\n          <div className=\"add-button\" onClick={() => setIsAddClicked(true)}>\n            Add A Task\n          </div>\n        )}\n        <MenuPopupState\n          isCompletedShown={isCompletedShown}\n          onToggleShowCompleted={handleToggleShowCompleted}\n          onDeleteCompleted={handleDeleteCompleted}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default App;\n","/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/TodoList.jsx",["62"],[],"/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/Menu.jsx",[],[],"/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/TodoItem.jsx",[],[],"/Users/htoomyat/Downloads/CS124/lab2-fork/cs124-lab2/src/firebase.jsx",[],[],["63","64"],{"ruleId":"65","severity":1,"message":"66","line":41,"column":30,"nodeType":"67","messageId":"68","endLine":41,"endColumn":35},{"ruleId":"65","severity":1,"message":"69","line":1,"column":17,"nodeType":"67","messageId":"68","endLine":1,"endColumn":25},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","replacedBy":"73"},"no-unused-vars","'error' is assigned a value but never used.","Identifier","unusedVar","'useState' is defined but never used.","no-native-reassign",["74"],"no-negated-in-lhs",["75"],"no-global-assign","no-unsafe-negation"]